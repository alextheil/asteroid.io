{"ast":null,"code":"import _classCallCheck from\"C:\\\\Courses\\\\PROG20261\\\\asteroid.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Courses\\\\PROG20261\\\\asteroid.io\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import{AsyncStorage}from'react-native';import{Buffer}from\"buffer\";import*as Colyseus from\"colyseus.js\";window.localStorage=AsyncStorage;global.Buffer=Buffer;var canvas;var context;var canvasWidth=window.innerWidth;var canvasHeight=window.innerHeight;var ship;var keys=[];var client=new Colyseus.Client('ws://localhost:2567');document.addEventListener('DOMContentLoaded',SetupCanvas);function SetupCanvas(){canvas=document.getElementById(\"asteroid-canvas\");context=canvas.getContext(\"2d\");canvas.width=canvasWidth;canvas.height=canvasHeight;context.fillStyle=\"black\";context.fillRect(0,0,canvas.width,canvas.height);ship=new Ship();document.body.addEventListener(\"keydown\",KeyDown);document.body.addEventListener(\"keyup\",KeyUp);Render();client.join(\"room_name\").then(function(room){console.log(room.sessionId,\"joined\",room.name);}).catch(function(e){console.log(\"JOIN ERROR\",e);});}function KeyDown(e){keys[e.keyCode]=true;}function KeyUp(e){keys[e.keyCode]=false;}var Ship=/*#__PURE__*/function(){function Ship(){_classCallCheck(this,Ship);this.visible=true;this.x=canvasWidth/2;this.y=canvasHeight/2;this.movingForward=false;this.speed=0.1;this.velX=0;this.velY=0;this.rotateSpeed=0.001;this.radius=15;this.angle=0;this.strokeColor='white';}_createClass(Ship,[{key:\"Rotate\",value:function Rotate(dir){this.angle+=this.rotateSpeed*dir;}},{key:\"Update\",value:function Update(){var radians=this.angle/Math.PI*180;if(this.movingForward){this.velX+=Math.cos(radians)*this.speed;this.velY+=Math.sin(radians)*this.speed;}//if (this.x < this.radius) { } //When the ship goes to the left of the canvas\n//if (this.x > canvas.width) { } //When the ship goes to the right of the canvas\n//if (this.y < this.radius) { } //When the ship goes to the bottom of the canvas\n//if (this.y > canvas.height) { } //When the ship goes to the top of the canvas\nthis.velX*=0.99;this.velY*=0.99;this.x-=this.velX;this.y-=this.velY;}},{key:\"Draw\",value:function Draw(){context.strokeStyle=this.strokeColor;context.beginPath();var vertAngle=Math.PI*2/3;var radians=this.angle/Math.PI*180;for(var i=0;i<3;i++){context.lineTo(this.x-this.radius*Math.cos(vertAngle*i+radians),this.y-this.radius*Math.sin(vertAngle*i+radians));//context.drawImage(\"../assets/ship.png\", 10, 10); // Draw ship asset over stroked ship\n}context.closePath();context.stroke();}}]);return Ship;}();function Render(){ship.movingForward=keys[87];if(keys[68]){ship.Rotate(1);}//rotate to right if 'D' is pressed\nif(keys[65]){ship.Rotate(-1);}//rotate to right if 'A' is pressed\ncontext.clearRect(0,0,canvasWidth,canvasHeight);if(ship.visible){ship.Update();ship.Draw();}requestAnimationFrame(Render);}","map":{"version":3,"sources":["C:/Courses/PROG20261/asteroid.io/src/App.js"],"names":["AsyncStorage","Buffer","Colyseus","window","localStorage","global","canvas","context","canvasWidth","innerWidth","canvasHeight","innerHeight","ship","keys","client","Client","document","addEventListener","SetupCanvas","getElementById","getContext","width","height","fillStyle","fillRect","Ship","body","KeyDown","KeyUp","Render","join","then","room","console","log","sessionId","name","catch","e","keyCode","visible","x","y","movingForward","speed","velX","velY","rotateSpeed","radius","angle","strokeColor","dir","radians","Math","PI","cos","sin","strokeStyle","beginPath","vertAngle","i","lineTo","closePath","stroke","Rotate","clearRect","Update","Draw","requestAnimationFrame"],"mappings":"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","sourcesContent":["import { AsyncStorage } from 'react-native';\r\nimport { Buffer } from \"buffer\";\r\nimport * as Colyseus from \"colyseus.js\";\r\nwindow.localStorage = AsyncStorage;\r\nglobal.Buffer = Buffer;\r\n\r\nlet canvas;\r\nlet context;\r\nlet canvasWidth = window.innerWidth;\r\nlet canvasHeight = window.innerHeight;\r\nlet ship;\r\nlet keys = [];\r\nvar client = new Colyseus.Client('ws://localhost:2567');\r\n\r\ndocument.addEventListener('DOMContentLoaded', SetupCanvas);\r\n\r\nfunction SetupCanvas(){\r\n    canvas = document.getElementById(\"asteroid-canvas\");\r\n    context = canvas.getContext(\"2d\");\r\n    canvas.width = canvasWidth;\r\n    canvas.height = canvasHeight;\r\n    context.fillStyle = \"black\";\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    ship = new Ship();\r\n\r\n    document.body.addEventListener(\"keydown\", KeyDown);\r\n    document.body.addEventListener(\"keyup\", KeyUp);\r\n\r\n    Render();\r\n\t\r\n\tclient.join(\"room_name\").then(room => {\r\n    console.log(room.sessionId, \"joined\", room.name);\r\n}).catch(e => {\r\n    console.log(\"JOIN ERROR\", e);\r\n});\r\n\r\n\r\n\r\n}\r\n\r\nfunction KeyDown(e){ keys[e.keyCode] = true; }\r\nfunction KeyUp(e){ keys[e.keyCode] = false; }\r\n\r\nclass Ship {\r\n    constructor() {\r\n        this.visible = true;\r\n        this.x = canvasWidth / 2;\r\n        this.y = canvasHeight / 2;\r\n        this.movingForward = false;\r\n        this.speed = 0.1;\r\n        this.velX = 0;\r\n        this.velY = 0;\r\n        this.rotateSpeed = 0.001;\r\n        this.radius = 15;\r\n        this.angle = 0;\r\n        this.strokeColor = 'white';\r\n    }\r\n\r\n\r\n    Rotate(dir) {\r\n        this.angle += this.rotateSpeed * dir;\r\n    }\r\n\r\n\r\n    Update() {\r\n        let radians = this.angle / Math.PI * 180;\r\n\r\n        if (this.movingForward) {\r\n            this.velX += Math.cos(radians) * this.speed;\r\n            this.velY += Math.sin(radians) * this.speed;\r\n        }\r\n        //if (this.x < this.radius) { } //When the ship goes to the left of the canvas\r\n        //if (this.x > canvas.width) { } //When the ship goes to the right of the canvas\r\n        //if (this.y < this.radius) { } //When the ship goes to the bottom of the canvas\r\n        //if (this.y > canvas.height) { } //When the ship goes to the top of the canvas\r\n\r\n        this.velX *= 0.99;\r\n        this.velY *= 0.99;\r\n\r\n        this.x -= this.velX;\r\n        this.y -= this.velY;\r\n    }\r\n\r\n    Draw() {\r\n        context.strokeStyle = this.strokeColor;\r\n        context.beginPath();\r\n        let vertAngle = ((Math.PI * 2) / 3);\r\n\r\n        let radians = this.angle / Math.PI * 180;\r\n\r\n        for (let i = 0; i < 3; i++) {\r\n            context.lineTo(this.x - this.radius * Math.cos(vertAngle * i + radians), this.y - this.radius * Math.sin(vertAngle * i + radians));\r\n            //context.drawImage(\"../assets/ship.png\", 10, 10); // Draw ship asset over stroked ship\r\n        }\r\n        context.closePath();\r\n        context.stroke();\r\n    }\r\n}\r\n\r\nfunction Render() {\r\n    ship.movingForward = (keys[87]);\r\n\r\n    if (keys[68]) { ship.Rotate(1); } //rotate to right if 'D' is pressed\r\n    if (keys[65]) { ship.Rotate(-1); } //rotate to right if 'A' is pressed\r\n\r\n    context.clearRect(0, 0, canvasWidth, canvasHeight);\r\n\r\n    if(ship.visible){\r\n        ship.Update();\r\n        ship.Draw();\r\n    }\r\n\r\n    requestAnimationFrame(Render);\r\n}"]},"metadata":{},"sourceType":"module"}